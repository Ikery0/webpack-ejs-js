(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._addEvent(),this.windowHeight=window.innerHeight}var n,i;return n=t,(i=[{key:"_set",value:function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},{key:"_checkHeight",value:function(){if(this.windowHeight===window.innerHeight)return!1;this._set()}},{key:"_addEvent",value:function(){this._set(),window.addEventListener("resize",this._checkHeight.bind(this))}}])&&e(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i;return t=e,(i=[{key:"on",value:function(){var e=this._getScrollElement().scrollTop,t={height:"100vh",position:"fixed",top:"".concat(-1*e,"px"),left:"0",width:"100vw"};Object.keys(t).forEach((function(e){document.body.style[e]=t[e]}))}},{key:"off",value:function(){var e=parseInt(document.body.style.top||"0"),t={height:"",position:"",top:"",left:"",width:""};Object.keys(t).forEach((function(e){document.body.style[e]=t[e]})),window.scrollTo(0,-1*e)}},{key:"_getScrollElement",value:function(){return"scrollingElement"in document?document.scrollingElement:document.documentElement}}])&&n(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DOM={},this.DOM.hamburger=document.getElementById(t.hamburger),this.DOM.menu=document.querySelector(".".concat(t.menu)),this.DOM.focusTrap=document.getElementById(t.focusTrap),this.CLASS=t.CLASS,this.flg=!1,this.bgFix=new i,this._addEvent()}var t,n;return t=e,(n=[{key:"_addEvent",value:function(){var e=this;this.DOM.hamburger.addEventListener("click",(function(){e.flg?e._close():e._open()})),this.DOM.focusTrap.addEventListener("focus",(function(){e.DOM.hamburger.focus()})),window.addEventListener("keydown",(function(t){"Escape"===t.key&&e._close()})),window.addEventListener("resize",(function(){window.matchMedia("(min-width: 768px)").matches&&e.flg&&e._close()}))}},{key:"_open",value:function(){this.flg=!0,this.bgFix.on(),this.DOM.menu.classList.add(this.CLASS),this.DOM.hamburger.classList.add(this.CLASS),this.DOM.hamburger.setAttribute("aria-expanded","true"),this.DOM.menu.setAttribute("aria-hidden","false"),this.DOM.hamburger.focus()}},{key:"_close",value:function(){this.flg=!1,this.bgFix.off(),this.DOM.menu.classList.remove(this.CLASS),this.DOM.hamburger.classList.remove(this.CLASS),this.DOM.hamburger.setAttribute("aria-expanded","false"),this.DOM.menu.setAttribute("aria-hidden","true")}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=c(t);if(n){var o=c(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return u(this,e)});function o(){var e;return l(this,o),(e=i.call(this))._start(),e}return h(o,[{key:"_start",value:function(){var e=location.hash,t=this;e&&(setTimeout((function(){window.scrollTo({top:0},0)})),setTimeout((function(){var n=document.getElementById(e.replace("#","")),i=window.pageYOffset||document.documentElement.scrollTop,o=document.querySelector("header").clientHeight,r=n.getBoundingClientRect().top-o,a=new Date;t.animationFrame(a,i,r)}),200))}}]),o}(function(){function e(){l(this,e),this.DOM={},this.DOM.body=document.body,this.DOM.targets=document.querySelectorAll('a[href^="#"]'),this.animateOpt={speed:600,easing:"easeOut"},this._addEvent()}return h(e,[{key:"easing",value:function(e,t,n,i){switch(this.animateOpt.easing){case"swing":return n*(.5-Math.cos(e/i*Math.PI)/2)+t;case"easeIn":return n*(e/=i)*e+t;case"easeOut":return-n*(e/=i)*(e-2)+t;case"easeInOut":return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t;default:alert("options.easingに正しい値を入れてください")}}},{key:"animationFrame",value:function(e,t,n){var i=this;requestAnimationFrame(function(){i.animate(e,t,n)}.bind(this))}},{key:"animate",value:function(e,t,n){var i=new Date-e;if(i>this.animateOpt.speed)return this.DOM.body.classList.remove("is-scroll-busy"),!1;window.scrollTo(0,this.easing(i,t,n,this.animateOpt.speed)),this.animationFrame(e,t,n)}},{key:"_getArg",value:function(e){e.preventDefault();var t=e.target;if(this.DOM.body.classList.contains("is-scroll-busy"))return!1;this.DOM.body.classList.add("is-scroll-busy");var n=window.pageYOffset||document.documentElement.scrollTop,i=t.getAttribute("href"),o=document.querySelector("#"==i||""==i?"html":i),r=document.querySelector("header").clientHeight,a=o.getBoundingClientRect().top-r,s=new Date;this.animationFrame(s,n,a)}},{key:"_addEvent",value:function(){var e=this;this.DOM.targets.forEach((function(t){t.addEventListener("click",(function(t){return e._getArg(t)}))}))}}]),e}());function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DOM={},this.DOM.details=document.querySelectorAll(".js-details"),this.RUNNING_VALUE="running",this.IS_OPENED_CLASS="is-open",this.animTiming={duration:400,easing:"ease-out"},this.closingAnimKeyframes=function(e){return[{height:e.offsetHeight+"px",opacity:1},{height:0,opacity:0}]},this.openingAnimKeyframes=function(e){return[{height:0,opacity:0},{height:e.offsetHeight+"px",opacity:1}]},this._addEvent()}var t,n;return t=e,(n=[{key:"_addEvent",value:function(){var e=this;this.DOM.details.forEach((function(t){var n=t.querySelector(".js-summary"),i=t.querySelector(".js-content");n.addEventListener("click",(function(n){n.preventDefault(),t.dataset.animStatus!==e.RUNNING_VALUE&&(t.open?e._close(t,i):e._open(t,i))}))}))}},{key:"_open",value:function(e,t){e.classList.toggle(this.IS_OPENED_CLASS),e.setAttribute("open","true");var n=t.animate(this.openingAnimKeyframes(t),this.animTiming);e.dataset.animStatus=this.RUNNING_VALUE,n.onfinish=function(){e.dataset.animStatus=""}}},{key:"_close",value:function(e,t){e.classList.toggle(this.IS_OPENED_CLASS);var n=t.animate(this.closingAnimKeyframes(t),this.animTiming);e.dataset.animStatus=this.RUNNING_VALUE,n.onfinish=function(){e.removeAttribute("open"),e.dataset.animStatus=""}}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.addEventListener("DOMContentLoaded",(function(){new t,new r({hamburger:"js-hamburger",menu:"js-spNav",CLASS:"is-active",focusTrap:"js-navTrap"}),new d,new y}))})();
//# sourceMappingURL=index.js.map